<div class="container">
    <div class="browser-mockup background-image">
        <div class="login-container">
            <div class="switch-container">
                <button class="left-button" [disabled]="connectionSuccess" [ngClass]="selectedDemo === 'idin' ? 'selected' : 'not-selected'" (click)="selectDemo('idin')">iDIN</button>
                <button class="right-button" [disabled]="connectionSuccess" [ngClass]="selectedDemo === 'epass' ? 'selected' : 'not-selected'" (click)="selectDemo('epass')">Epass</button>
            </div>
            <div class="logo fixed-width" id="qrCode" [hidden]="connectionSuccess || identifySuccess">
                <canvas #qrCodeCanvas></canvas>
                <p>Scan this QR code with the<br/><b>ProofMe.ID App</b></p>
            </div>
            <div class="logo fixed-width mobile-button-div" [hidden]="connectionSuccess">
                <p>Click here to identify with the<br/><b>ProofMe.ID App</b></p>
                <a [href]="mobileLoginUrl | safeUrl" class="btn btn-success mobile-button">Identify</a>
            </div>

            <div class="row feature-row" *ngIf="connectionSuccess && !identity && !signedOnInCorrect && !userSignatureInCorrect && !serverSignatureInCorrect && !invalidTrustedIssuer">
                <div class="feature-row">
                    <div class="card fixed-width-card border-left-success shadow h-100 py-2" id="connection">
                        <div class="card-body">
                            <div class="row no-gutters align-items-center white-background">
                                <div class="inner-block">
                                    <div class="avatar-container text-success">
                                        <fa-icon [icon]="['fas', 'check']"></fa-icon>
                                    </div>
                                    <div class="text-container">
                                        <div class="text font-weight-bold text-success text-uppercase mb-1">
                                            Connection successful
                                        </div>
                                        <div class="text text-primary text-break mb-1" > ProofMe.ID App connected</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="idcard-row" *ngIf="identifySuccess && !userSignatureInCorrect && !serverSignatureInCorrect && !invalidTrustedIssuer">
                <div class="center-div">
                    <div *ngIf="identifyType === 'idin'" class="idcard green">
                        <div class="additional">
                            <div class="user-idcard">
                                <div class="level center-id">
                                    {{ identity['OLDER_THAN_18'].issuer.authorityName }}
                                </div>
                                <img src="/assets/img/male.png" class="idimg center-id" *ngIf="identity['GENDER'].credentialSubject.credential.value == 'MALE'">
                                <img src="/assets/img/female.png" class="idimg center-id" *ngIf="identity['GENDER'].credentialSubject.credential.value == 'FEMALE'">
                                <div class="points center-id">
                                    {{ identity['GENDER'].credentialSubject.credential.value }}
                                </div>
                            </div>
                            <div class="more-info">
                                <h1>
                                    {{ identity['INITIALS'].credentialSubject.credential.value }} {{ identity['LAST_NAME_PREFERRED'].credentialSubject.credential.value }}
                                </h1>
                                <div class="coords">
                                    <span>{{ identity['STREET'].credentialSubject.credential.value }} {{ identity['HOUSE_NUMBER'].credentialSubject.credential.value }} </span>
                                </div>
                                <div class="coords">
                                    <span>{{ identity['POSTAL_CODE'].credentialSubject.credential.value }} {{ identity['CITY'].credentialSubject.credential.value }} {{ identity['COUNTRY_CODE'].credentialSubject.credential.value }}</span>
                                </div>
                                <div class="stats">
                                    <div class="success" *ngIf="identity['OLDER_THAN_18'].credentialSubject.credential.value === true">
                                        <fa-icon [icon]="['fas', 'glass-cheers']"></fa-icon>
                                        <div class="title">> 18 years</div>
                                    </div>
                                    <div class="text-danger" *ngIf="identity['OLDER_THAN_18'].credentialSubject.credential.value === false">
                                        <fa-icon [icon]="['fas', 'glass-cheers']"></fa-icon>
                                        <div class="title">< 18 years</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="general">
                            <h1>
                                {{ identity['INITIALS'].credentialSubject.credential.value }} {{ identity['LAST_NAME_PREFERRED'].credentialSubject.credential.value }}
                            </h1>
                            <div class="text font-weight-bold success text-uppercase mb-1" *ngIf="identity['OLDER_THAN_18'].credentialSubject.credential.value === true">
                                > 18 years <fa-icon [icon]="['fas', 'glass-cheers']"></fa-icon>
                            </div>
                            <div class="text font-weight-bold text-danger text-uppercase mb-1" *ngIf="identity['OLDER_THAN_18'].credentialSubject.credential.value === false">
                                < 18 years <fa-icon [icon]="['fas', 'glass-cheers']"></fa-icon>
                            </div>
                        </div>
                    </div>
                    <div *ngIf="identifyType === 'epass'" class="idcard green non-hover">
                        <div class="additional non-hover">
                            <div class="user-idcard">
                                <div class="level center-id">
                                    {{ identity['OLDER_THAN_18'].issuer.authorityName }}
                                </div>
                                <img [src]="identity['PHOTO'].credentialSubject.credential.value | safeHtmlImage" class="epassimg center-id">
                                <div class="points center-id">
                                    {{ identity['GENDER'].credentialSubject.credential.value }}
                                </div>
                            </div>
                        </div>
                        <div class="general">
                            <h1>
                                {{ identity['FIRST_NAME'].credentialSubject.credential.value }} {{ identity['LAST_NAME'].credentialSubject.credential.value }}
                            </h1>
                            <div class="text font-weight-bold success text-uppercase mb-1" *ngIf="identity['OLDER_THAN_18'].credentialSubject.credential.value === true">
                                > 18 years <fa-icon [icon]="['fas', 'glass-cheers']"></fa-icon>
                            </div>
                            <div class="text font-weight-bold text-danger text-uppercase mb-1" *ngIf="identity['OLDER_THAN_18'].credentialSubject.credential.value === false">
                                < 18 years <fa-icon [icon]="['fas', 'glass-cheers']"></fa-icon>
                            </div>
                        </div>
                    </div>
                    <div class="row feature-row">
                        <button (click)="disconnect()" class="btn btn-danger card-button">
                            Disconnect
                        </button>
                    </div>
                </div>
            </div>
            <div class="row feature-row" *ngIf="!identifySuccess && identity && !userSignatureInCorrect && !serverSignatureInCorrect && !invalidTrustedIssuer">
                <div class="feature-row">
                    <div class="card fixed-width-card border-left-danger shadow h-100 py-2">
                        <div class="card-body">
                            <div class="row no-gutters align-items-center white-background">
                                <div class="inner-block">
                                    <div class="avatar-container text-danger">
                                        <fa-icon [icon]="['fas', 'times-circle']"></fa-icon>
                                    </div>
                                    <div class="text-container">
                                        <div class="text font-weight-bold text-danger text-uppercase mb-1">
                                            Identification failed
                                        </div>
                                        <div class="text text-primary text-break mb-1" >{{ identity }}</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row feature-row" *ngIf="signedOnInCorrect">
                <div class="feature-row">
                    <div class="card fixed-width-card border-left-danger shadow h-100 py-2">
                        <div class="card-body">
                            <div class="row no-gutters align-items-center white-background">
                                <div class="inner-block">
                                    <div class="avatar-container text-danger">
                                        <fa-icon [icon]="['fas', 'times-circle']"></fa-icon>
                                    </div>
                                    <div class="text-container">
                                        <div class="text font-weight-bold text-danger text-uppercase mb-1">
                                            Timestamp incorrect
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row feature-row" *ngIf="userSignatureInCorrect">
                <div class="feature-row">
                    <div class="card fixed-width-card border-left-danger shadow h-100 py-2">
                        <div class="card-body">
                            <div class="row no-gutters align-items-center white-background">
                                <div class="inner-block">
                                    <div class="avatar-container text-danger">
                                        <fa-icon [icon]="['fas', 'times-circle']"></fa-icon>
                                    </div>
                                    <div class="text-container">
                                        <div class="text font-weight-bold text-danger text-uppercase mb-1">
                                            User signature incorrect
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row feature-row" *ngIf="serverSignatureInCorrect">
                <div class="feature-row">
                    <div class="card fixed-width-card border-left-danger shadow h-100 py-2">
                        <div class="card-body">
                            <div class="row no-gutters align-items-center white-background">
                                <div class="inner-block">
                                    <div class="avatar-container text-danger">
                                        <fa-icon [icon]="['fas', 'times-circle']"></fa-icon>
                                    </div>
                                    <div class="text-container">
                                        <div class="text font-weight-bold text-danger text-uppercase mb-1">
                                            Issuer signature incorrect
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row feature-row" *ngIf="invalidTrustedIssuer">
                <div class="feature-row">
                    <div class="card fixed-width-card border-left-danger shadow h-100 py-2">
                        <div class="card-body">
                            <div class="row no-gutters align-items-center white-background">
                                <div class="inner-block">
                                    <div class="avatar-container text-danger">
                                        <fa-icon [icon]="['fas', 'times-circle']"></fa-icon>
                                    </div>
                                    <div class="text-container">
                                        <div class="text font-weight-bold text-danger text-uppercase mb-1">
                                            Invalid trusted issuer
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row feature-row" *ngIf="connectionSuccess && !identifySuccess && !identity">
                <button (click)="remoteDisconnect()" class="btn btn-danger card-button">
                    Disconnect
                </button>
            </div>
            <div class="row feature-row" *ngIf="connectionSuccess && identifySuccess && !identity">
                <button (click)="remoteDisconnect()" class="btn btn-danger card-button">
                    Return